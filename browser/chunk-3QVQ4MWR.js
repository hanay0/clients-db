import{A as $,E as B,G as H,H as j,I as P,J as f,K as z,L as J,M as K,N as Q,O as W,P as X,Q as Y,R as Z,S as ee,T as te,a as w,b as y,c as k,d as x,e as F,f as R,g as q,h as a,i as g,j as p,k as c,l as o,m as l,n as v,o as O,p as E,q as S,r as d,s as _,t as M,u as h,v as G,w as V,x as I,y as A,z as U}from"./chunk-WW4OF4KU.js";var L=(()=>{let t=class t{constructor(i){this.http=i,this.baseURL="https://dev-movies-news-apis.pantheonsite.io/wp-json/clients/v1/"}getClients(){return this.http.get(this.baseURL+"clients")}addClient(i,n){return n?this.http.put(this.baseURL+"update-client/"+n,i):this.http.post(this.baseURL+"add-client",i)}getSingleClient(i){return this.http.get(this.baseURL+"client/"+i)}};t.\u0275fac=function(n){return new(n||t)(k($))},t.\u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var ae=()=>["/clients","add"],de=e=>["/clients","edit",e];function me(e,t){e&1&&(o(0,"div",6)(1,"p"),d(2,"Loading..."),l()())}function ce(e,t){if(e&1&&(o(0,"li",14)(1,"span"),d(2),l(),o(3,"span",15),d(4),l()()),e&2){let m=t.$implicit;a(2),_(" Child Name: ",m.name," "),a(2),_("Child Age: ",m.age,"")}}function se(e,t){if(e&1&&(o(0,"div",7)(1,"div",8)(2,"h3",9)(3,"span"),d(4),l()(),o(5,"h5",10),d(6),l(),o(7,"button",11),d(8," Edit "),l()(),o(9,"span",12),d(10,"Children: "),l(),o(11,"ul"),p(12,ce,5,2,"li",13),l()()),e&2){let m=t.$implicit;a(4),_("Client Name: ",m.name,""),a(2),_("Client Age: ",m.age?m.age:"not provided",""),a(),c("routerLink",h(4,de,m.id)),a(5),c("ngForOf",m.children)}}var ne=(()=>{let t=class t{constructor(i,n){this.clientService=i,this.cdr=n,this.clients=[],this.isLoading=!0}ngOnInit(){this.getClientsList()}getClientsList(){this.clientService.getClients().subscribe({next:i=>{console.log("API Response:",i),i.code===200?(this.clients=i.data,console.log("Clients:",this.clients)):console.error("Unexpected response code:",i.code),this.isLoading=!1,this.cdr.detectChanges()},error:i=>{console.error("API Error:",i),this.isLoading=!1,this.cdr.detectChanges()}})}};t.\u0275fac=function(n){return new(n||t)(g(L),g(G))},t.\u0275cmp=x({type:t,selectors:[["app-list"]],decls:8,vars:4,consts:[[1,"container"],[1,"row","justify-content-between","py-2"],[1,"col-12","d-flex","justify-content-end","mb-3"],[1,"btn","btn-secondary",3,"routerLink"],["class","col-12",4,"ngIf"],["class","col-12 mb-4 card",4,"ngFor","ngForOf"],[1,"col-12"],[1,"col-12","mb-4","card"],[1,"d-flex","align-items-baseline","justify-content-between","card-body"],[1,"d-flex","justify-content-between"],[1,"text-primary","mx-5"],[1,"btn","btn-info",3,"routerLink"],[1,"text-danger","mb-3"],["class","d-flex align-items-center",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],[1,"ms-4"]],template:function(n,r){n&1&&(o(0,"section")(1,"div",0)(2,"div",1)(3,"div",2)(4,"a",3),d(5,"Add Client"),l()(),p(6,me,3,0,"div",4)(7,se,13,6,"div",5),l()()()),n&2&&(a(4),c("routerLink",M(3,ae)),a(2),c("ngIf",r.isLoading),a(),c("ngForOf",r.clients))},dependencies:[I,A,H]});let e=t;return e})();var T=e=>({"is-invalid":e});function pe(e,t){e&1&&(o(0,"div",14),d(1," Name is required. "),l())}function ue(e,t){e&1&&(o(0,"div"),d(1,"Age is required."),l())}function fe(e,t){e&1&&(o(0,"div"),d(1,"Age must be at least 22"),l())}function ge(e,t){e&1&&(o(0,"div"),d(1,"Age must be at most 100"),l())}function he(e,t){if(e&1&&(o(0,"div",14),p(1,ue,2,0,"div",15)(2,fe,2,0,"div",15)(3,ge,2,0,"div",15),l()),e&2){let m,i,n,r=S();a(),c("ngIf",(m=r.clientForm.get("age"))==null||m.errors==null?null:m.errors.required),a(),c("ngIf",(i=r.clientForm.get("age"))==null||i.errors==null?null:i.errors.min),a(),c("ngIf",(n=r.clientForm.get("age"))==null||n.errors==null?null:n.errors.max)}}function ve(e,t){e&1&&(o(0,"div",14),d(1," Child name is required. "),l())}function _e(e,t){e&1&&(o(0,"div"),d(1,"Child age is required."),l())}function Ce(e,t){e&1&&(o(0,"div"),d(1,"Child age must be at least 0"),l())}function be(e,t){if(e&1&&(o(0,"div",14),p(1,_e,2,0,"div",15)(2,Ce,2,0,"div",15),l()),e&2){let m,i,n=S().$implicit;a(),c("ngIf",(m=n.get("age"))==null||m.errors==null?null:m.errors.required),a(),c("ngIf",(i=n.get("age"))==null||i.errors==null?null:i.errors.min)}}function ye(e,t){if(e&1){let m=O();o(0,"div",16)(1,"div",17)(2,"div",18)(3,"label",19),d(4,"Child Name"),l(),v(5,"input",20),p(6,ve,2,0,"div",7),l(),o(7,"div",18)(8,"label",21),d(9,"Child Age"),l(),v(10,"input",22),p(11,be,3,2,"div",7),o(12,"button",23),E("click",function(){let n=R(m).index,r=S();return q(r.removeChild(n))}),d(13,"Delete Child"),l()()()()}if(e&2){let m,i,n,r,s=t.$implicit,u=t.index;c("formGroupName",u),a(5),c("ngClass",h(5,T,((m=s.get("name"))==null?null:m.invalid)&&((m=s.get("name"))==null?null:m.touched))),a(),c("ngIf",((i=s.get("name"))==null?null:i.invalid)&&((i=s.get("name"))==null?null:i.touched)),a(4),c("ngClass",h(7,T,((n=s.get("age"))==null?null:n.invalid)&&((n=s.get("age"))==null?null:n.touched))),a(),c("ngIf",((r=s.get("age"))==null?null:r.invalid)&&((r=s.get("age"))==null?null:r.touched))}}var D=(()=>{let t=class t{constructor(i,n,r){this.fb=i,this.clientService=n,this.activatedRoute=r,this.clientForm=this.fb.group({name:["",f.required],age:["",[f.required,f.min(22),f.max(100)]],children:this.fb.array([])}),this.clientID=this.activatedRoute.snapshot.params.id}ngOnInit(){this.clientID&&this.getClientByID(this.clientID)}get children(){return this.clientForm.get("children")}addChild(){let i=this.fb.group({name:["",f.required],age:["",[f.required,f.min(0)]]});this.children.push(i)}removeChild(i){this.children.removeAt(i)}save(){if(this.clientForm.valid){let i=this.clientForm.value;this.client=i,console.log(this.client),this.clientID?this.clientService.addClient(this.client,this.clientID).subscribe(n=>{console.log(n)}):this.clientService.addClient(this.client).subscribe(n=>{console.log(n),this.clientForm.reset()})}}getClientByID(i){this.clientService.getSingleClient(i).subscribe(n=>{console.log(n),this.client=n,this.clientForm.patchValue({name:this.client.name,age:this.client.age,children:this.client.children}),console.log("Form after patching value:",this.clientForm.value),this.children.clear(),this.client.children&&this.client.children.forEach(r=>{this.children.push(this.fb.group({name:r.name,age:r.age}))})})}};t.\u0275fac=function(n){return new(n||t)(g(ee),g(L),g(B))},t.\u0275cmp=x({type:t,selectors:[["app-add-edit"]],decls:22,vars:10,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-12","col-md-8"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name","aria-describedby","emailHelp",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","age",1,"form-label"],["type","number","formControlName","age","id","age",1,"form-control",3,"ngClass"],["formArrayName","children"],["class","mb-3",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-success",3,"click"],["type","submit",1,"btn","btn-primary"],[1,"invalid-feedback"],[4,"ngIf"],[1,"mb-3",3,"formGroupName"],[1,"row"],[1,"col-6"],["for","childName",1,"form-label"],["type","text","id","childName","formControlName","name",1,"form-control",3,"ngClass"],["for","childAge",1,"form-label"],["type","number","id","childAge","formControlName","age",1,"form-control",3,"ngClass"],["type","button",1,"btn","btn-danger","mt-2",3,"click"]],template:function(n,r){if(n&1&&(o(0,"section")(1,"div",0)(2,"div",1)(3,"div",2)(4,"form",3),E("ngSubmit",function(u){return r.save(),u.preventDefault()}),o(5,"div",4)(6,"label",5),d(7,"Name"),l(),v(8,"input",6),p(9,pe,2,0,"div",7),l(),o(10,"div",4)(11,"label",8),d(12,"Age"),l(),v(13,"input",9),p(14,he,4,3,"div",7),l(),o(15,"div",10),p(16,ye,14,9,"div",11),l(),o(17,"div",4)(18,"button",12),E("click",function(){return r.addChild()}),d(19,"Add Child"),l()(),o(20,"button",13),d(21,"Submit"),l()()()()()()),n&2){let s,u,C,b;a(4),c("formGroup",r.clientForm),a(4),c("ngClass",h(6,T,((s=r.clientForm.get("name"))==null?null:s.invalid)&&((s=r.clientForm.get("name"))==null?null:s.touched))),a(),c("ngIf",((u=r.clientForm.get("name"))==null?null:u.invalid)&&((u=r.clientForm.get("name"))==null?null:u.touched)),a(4),c("ngClass",h(8,T,((C=r.clientForm.get("age"))==null?null:C.invalid)&&((C=r.clientForm.get("age"))==null?null:C.touched))),a(),c("ngIf",((b=r.clientForm.get("age"))==null?null:b.invalid)&&((b=r.clientForm.get("age"))==null?null:b.touched)),a(2),c("ngForOf",r.children.controls)}},dependencies:[V,I,A,K,P,Q,z,J,W,Z,X,Y]});let e=t;return e})();var xe=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:ne},{path:"add",component:D},{path:"edit/:id",component:D}],le=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=F({type:t}),t.\u0275inj=y({imports:[j.forChild(xe),j]});let e=t;return e})();var Ge=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=F({type:t}),t.\u0275inj=y({imports:[U,le,te]});let e=t;return e})();export{Ge as ClientModule};
